<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Resume Manager</title>
</head>
<body>
  <h1>Resume Manager</h1>
  <input id="filename" placeholder="Nom du fichier" />
  <select id="theme">
    <option value="elegant">elegant</option>
    <option value="caffeine">caffeine</option>
  </select>
  <button id="export-pdf">Exporter PDF</button>
  <button id="export-html">Exporter HTML</button>
  <script>
    async function exporter(format) {
      const filename = document.getElementById('filename').value || 'cv';
      const theme = document.getElementById('theme').value;
      const res = await fetch(`/api/export?theme=${theme}&format=${format}&filename=${filename}`);
      if (!res.ok) {
        alert('Erreur: ' + await res.text());
        return;
      }
      const blob = await res.blob();
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${filename}.${format}`;
      a.click();
      URL.revokeObjectURL(url);
    }
    document.getElementById('export-pdf').onclick = () => exporter('pdf');
    document.getElementById('export-html').onclick = () => exporter('html');
  </script>
</body>
</html>
